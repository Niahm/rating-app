// Moment.js
//
// (c) 2011 Tim Wood
// Moment.js is freely distributable under the terms of the MIT license.
//
// Version 1.3.0
define(function(require,exports,module){(function(Date,undefined){var moment,round=Math.round,languages={},hasModule=typeof module!="undefined",paramsToParse="months|monthsShort|monthsParse|weekdays|weekdaysShort|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),i,charactersToReplace=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?|ZZ?|LT|LL?L?L?)/g,nonuppercaseLetters=/[^A-Z]/g,timezoneRegex=/\([A-Za-z ]+\)|:[0-9]{2} [A-Z]{3} /g,tokenCharacters=/(\\)?(MM?M?M?|dd?d?d|DD?D?D?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|ZZ?|T)/g,inputCharacters=/(\\)?([0-9]+|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+|([\+\-]\d\d:?\d\d))/gi,timezoneParseRegex=/([\+\-]|\d\d)/gi,VERSION="1.3.0",shortcuts="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|");function Moment(date){this._d=date}function leftZeroFill(number,targetLength){var output=number+"";while(output.length<targetLength)output="0"+output;return output}function dateAddRemove(date,_input,adding,val){var isString=typeof _input=="string",input=isString?{}:_input,ms,d,M,currentDate;return isString&&val&&(input[_input]=val),ms=(input.ms||input.milliseconds||0)+(input.s||input.seconds||0)*1e3+(input.m||input.minutes||0)*6e4+(input.h||input.hours||0)*36e5,d=(input.d||input.days||0)+(input.w||input.weeks||0)*7,M=(input.M||input.months||0)+(input.y||input.years||0)*12,ms&&date.setTime(+date+ms*adding),d&&date.setDate(date.getDate()+d*adding),M&&(currentDate=date.getDate(),date.setDate(1),date.setMonth(date.getMonth()+M*adding),date.setDate(Math.min((new Date(date.getFullYear(),date.getMonth()+1,0)).getDate(),currentDate))),date}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]"}function dateFromArray(input){return new Date(input[0],input[1]||0,input[2]||1,input[3]||0,input[4]||0,input[5]||0,input[6]||0)}function formatDate(date,inputString){var m=new Moment(date),currentMonth=m.month(),currentDate=m.date(),currentYear=m.year(),currentDay=m.day(),currentHours=m.hours(),currentMinutes=m.minutes(),currentSeconds=m.seconds(),currentZone=m.zone(),ordinal=moment.ordinal,meridiem=moment.meridiem;function replaceFunction(input){var a,b;switch(input){case"M":return currentMonth+1;case"Mo":return currentMonth+1+ordinal(currentMonth+1);case"MM":return leftZeroFill(currentMonth+1,2);case"MMM":return moment.monthsShort[currentMonth];case"MMMM":return moment.months[currentMonth];case"D":return currentDate;case"Do":return currentDate+ordinal(currentDate);case"DD":return leftZeroFill(currentDate,2);case"DDD":return a=new Date(currentYear,currentMonth,currentDate),b=new Date(currentYear,0,1),~~((a-b)/864e5+1.5);case"DDDo":return a=replaceFunction("DDD"),a+ordinal(a);case"DDDD":return leftZeroFill(replaceFunction("DDD"),3);case"d":return currentDay;case"do":return currentDay+ordinal(currentDay);case"ddd":return moment.weekdaysShort[currentDay];case"dddd":return moment.weekdays[currentDay];case"w":return a=new Date(currentYear,currentMonth,currentDate-currentDay+5),b=new Date(a.getFullYear(),0,4),~~((a-b)/864e5/7+1.5);case"wo":return a=replaceFunction("w"),a+ordinal(a);case"ww":return leftZeroFill(replaceFunction("w"),2);case"YY":return leftZeroFill(currentYear%100,2);case"YYYY":return currentYear;case"a":return currentHours>11?meridiem.pm:meridiem.am;case"A":return currentHours>11?meridiem.PM:meridiem.AM;case"H":return currentHours;case"HH":return leftZeroFill(currentHours,2);case"h":return currentHours%12||12;case"hh":return leftZeroFill(currentHours%12||12,2);case"m":return currentMinutes;case"mm":return leftZeroFill(currentMinutes,2);case"s":return currentSeconds;case"ss":return leftZeroFill(currentSeconds,2);case"zz":case"z":return(date.toString().match(timezoneRegex)||[""])[0].replace(nonuppercaseLetters,"");case"Z":return(currentZone>0?"+":"-")+leftZeroFill(~~(Math.abs(currentZone)/60),2)+":"+leftZeroFill(~~(Math.abs(currentZone)%60),2);case"ZZ":return(currentZone>0?"+":"-")+leftZeroFill(~~(10*Math.abs(currentZone)/6),4);case"L":case"LL":case"LLL":case"LLLL":case"LT":return formatDate(date,moment.longDateFormat[input]);default:return input.replace(/(^\[)|(\\)|\]$/g,"")}}return inputString.replace(charactersToReplace,replaceFunction)}function makeDateFromStringAndFormat(string,format){var inArray=[0,0,1,0,0,0,0],timezoneHours=0,timezoneMinutes=0,isUsingUTC=!1,inputParts=string.match(inputCharacters),formatParts=format.match(tokenCharacters),i,isPm;function addTime(format,input){var a;switch(format){case"M":case"MM":inArray[1]=~~input-1;break;case"MMM":case"MMMM":for(a=0;a<12;a++)if(moment.monthsParse[a].test(input)){inArray[1]=a;break}break;case"D":case"DD":case"DDD":case"DDDD":inArray[2]=~~input;break;case"YY":input=~~input,inArray[0]=input+(input>70?1900:2e3);break;case"YYYY":inArray[0]=~~Math.abs(input);break;case"a":case"A":isPm=input.toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":inArray[3]=~~input;break;case"m":case"mm":inArray[4]=~~input;break;case"s":case"ss":inArray[5]=~~input;break;case"Z":case"ZZ":isUsingUTC=!0,a=input.match(timezoneParseRegex),a[1]&&(timezoneHours=~~a[1]),a[2]&&(timezoneMinutes=~~a[2]),a[0]==="-"&&(timezoneHours=-timezoneHours,timezoneMinutes=-timezoneMinutes)}}for(i=0;i<formatParts.length;i++)addTime(formatParts[i],inputParts[i]);return isPm&&inArray[3]<12&&(inArray[3]+=12),isPm===!1&&inArray[3]===12&&(inArray[3]=0),inArray[3]+=timezoneHours,inArray[4]+=timezoneMinutes,isUsingUTC?new Date(Date.UTC.apply({},inArray)):dateFromArray(inArray)}function compareArrays(array1,array2){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++)~~array1[i]!==~~array2[i]&&diffs++;return diffs+lengthDiff}function makeDateFromStringAndArray(string,formats){var output,inputParts=string.match(inputCharacters),scores=[],scoreToBeat=99,i,curDate,curScore;for(i=0;i<formats.length;i++)curDate=makeDateFromStringAndFormat(string,formats[i]),curScore=compareArrays(inputParts,formatDate(curDate,formats[i]).match(inputCharacters)),curScore<scoreToBeat&&(scoreToBeat=curScore,output=curDate);return output}moment=function(input,format){if(input===null)return null;var date;return input&&input._d instanceof Date?date=new Date(+input._d):format?isArray(format)?date=makeDateFromStringAndArray(input,format):date=makeDateFromStringAndFormat(input,format):date=input===undefined?new Date:input instanceof Date?input:isArray(input)?dateFromArray(input):new Date(input),new Moment(date)},moment.version=VERSION,moment.lang=function(key,values){var i,param,req,parse=[];if(values){for(i=0;i<12;i++)parse[i]=new RegExp("^"+values.months[i]+"|^"+values.monthsShort[i].replace(".",""),"i");values.monthsParse=values.monthsParse||parse,languages[key]=values}if(languages[key])for(i=0;i<paramsToParse.length;i++)param=paramsToParse[i],moment[param]=languages[key][param]||moment[param];else hasModule&&(req=require("./lang/"+key),moment.lang(key,req))},moment.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(number){var b=number%10;return~~(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th"}}),moment.lang("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiem:{AM:"上午",am:"上午",PM:"下午",pm:"下午"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},relativeTime:{future:"%s后",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},ordinal:function(number){return""}});function substituteTimeAgo(string,number,withoutSuffix){var rt=moment.relativeTime[string];return typeof rt=="function"?rt(number||1,!!withoutSuffix,string):rt.replace(/%d/i,number||1)}function relativeTime(milliseconds,withoutSuffix){var seconds=round(Math.abs(milliseconds)/1e3),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),args=seconds<45&&["s",seconds]||minutes===1&&["m"]||minutes<45&&["mm",minutes]||hours===1&&["h"]||hours<22&&["hh",hours]||days===1&&["d"]||days<=25&&["dd",days]||days<=45&&["M"]||days<345&&["MM",round(days/30)]||years===1&&["y"]||["yy",years];return args[2]=withoutSuffix,substituteTimeAgo.apply({},args)}moment.fn=Moment.prototype={clone:function(){return moment(this)},valueOf:function(){return+this._d},"native":function(){return this._d},toString:function(){return this._d.toString()},toDate:function(){return this._d},format:function(inputString){return formatDate(this._d,inputString)},add:function(input,val){return this._d=dateAddRemove(this._d,input,1,val),this},subtract:function(input,val){return this._d=dateAddRemove(this._d,input,-1,val),this},diff:function(input,val,asFloat){var inputMoment=moment(input),diff=this._d-inputMoment._d,year=this.year()-inputMoment.year(),month=this.month()-inputMoment.month(),day=this.day()-inputMoment.day(),output;return val==="months"?output=year*12+month+day/30:val==="years"?output=year+month/12:output=val==="seconds"?diff/1e3:val==="minutes"?diff/6e4:val==="hours"?diff/36e5:val==="days"?diff/864e5:val==="weeks"?diff/6048e5:val==="days"?diff/3600:diff,asFloat?output:round(output)},from:function(time,withoutSuffix){var difference=this.diff(time),rel=moment.relativeTime,output=relativeTime(difference,withoutSuffix);return withoutSuffix?output:(difference<=0?rel.past:rel.future).replace(/%s/i,output)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(){var today=moment(),todayAtZeroHour=moment([today.year(),today.month(),today.date()]),diff=this.diff(todayAtZeroHour,"days",!0),calendar=moment.calendar,allElse=calendar.sameElse,format=diff<-6?allElse:diff<-1?calendar.lastWeek:diff<0?calendar.lastDay:diff<1?calendar.sameDay:diff<2?calendar.nextDay:diff<7?calendar.nextWeek:allElse;return this.format(typeof format=="function"?format.apply(this):format)},isLeapYear:function(){var year=this.year();return year%4===0&&year%100!==0||year%400===0},isDST:function(){return this.zone()!==moment([this.year()]).zone()},day:function(input){var day=this._d.getDay();return input==null?day:this.add({d:input-day})}};function makeShortcut(name,key){moment.fn[name]=function(input){return input!=null?(this._d["set"+key](input),this):this._d["get"+key]()}}for(i=0;i<shortcuts.length;i++)makeShortcut(shortcuts[i].toLowerCase(),shortcuts[i]);makeShortcut("year","FullYear"),moment.fn.zone=function(){return this._d.getTimezoneOffset()},hasModule&&(module.exports=moment),typeof window!="undefined"&&(window.moment=moment)})(Date),module.exports=moment});
